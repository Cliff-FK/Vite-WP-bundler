<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse Plugins Vite - Optimisation & Remplacement</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .metadata {
            background: #f8f9fa;
            padding: 20px 40px;
            border-bottom: 3px solid #667eea;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .metadata-item {
            display: flex;
            flex-direction: column;
        }

        .metadata-item strong {
            color: #667eea;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .content {
            padding: 40px;
        }

        h2 {
            color: #667eea;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
            font-size: 1.8rem;
        }

        h2:first-child {
            margin-top: 0;
        }

        h3 {
            color: #764ba2;
            margin: 30px 0 15px 0;
            font-size: 1.4rem;
        }

        h4 {
            color: #555;
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .badge-safe { background: #d4edda; color: #155724; }
        .badge-medium { background: #fff3cd; color: #856404; }
        .badge-high { background: #f8d7da; color: #721c24; }
        .badge-critical { background: #721c24; color: white; }
        .badge-obsolete { background: #6c757d; color: white; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
        }

        tr:hover {
            background: #f8f9fa;
        }

        tr:last-child td {
            border-bottom: none;
        }

        .plugin-card {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 15px 0;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .plugin-card h4 {
            margin-top: 0;
            color: #667eea;
            font-size: 1.2rem;
        }

        .plugin-safe { border-left-color: #28a745; }
        .plugin-medium { border-left-color: #ffc107; }
        .plugin-high { border-left-color: #dc3545; }
        .plugin-critical { border-left-color: #721c24; }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.5;
            margin: 15px 0;
        }

        code {
            font-family: 'Courier New', Courier, monospace;
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            color: #d63384;
            font-size: 0.9em;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }

        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }

        .danger-box {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 6px;
        }

        ul, ol {
            margin: 15px 0 15px 30px;
        }

        li {
            margin: 8px 0;
        }

        .toc {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .toc h3 {
            margin-top: 0;
            color: #667eea;
        }

        .toc ul {
            margin-left: 0;
            list-style: none;
        }

        .toc li {
            margin: 10px 0;
        }

        .toc a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
        }

        .toc a:hover {
            color: #764ba2;
            padding-left: 5px;
        }

        footer {
            background: #2d2d2d;
            color: white;
            padding: 30px;
            text-align: center;
            font-size: 0.9rem;
        }

        footer a {
            color: #667eea;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .emoji {
            font-style: normal;
            font-size: 1.2em;
            margin-right: 5px;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            header h1 {
                font-size: 1.8rem;
            }

            .content {
                padding: 20px;
            }

            table {
                font-size: 0.85rem;
            }

            th, td {
                padding: 10px;
            }
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
            }

            header {
                background: #667eea;
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîç Analyse Plugins Vite.js</h1>
            <p>Optimisation & Strat√©gie de Remplacement - Bundler WordPress</p>
        </header>

        <div class="metadata">
            <div class="metadata-item">
                <strong>üìÖ Date d'analyse</strong>
                <span>2 d√©cembre 2025</span>
            </div>
            <div class="metadata-item">
                <strong>üéØ Projet</strong>
                <span>site-gambetta-2025 / themezero</span>
            </div>
            <div class="metadata-item">
                <strong>‚öôÔ∏è Version Vite</strong>
                <span>5.0.10</span>
            </div>
            <div class="metadata-item">
                <strong>üìä Total Plugins</strong>
                <span>13 fichiers analys√©s</span>
            </div>
        </div>

        <div class="content">
            <div class="toc">
                <h3>üìë Table des mati√®res</h3>
                <ul>
                    <li><a href="#fichiers-obsoletes">1. Fichiers obsol√®tes identifi√©s</a></li>
                    <li><a href="#remplacement-npm">2. Remplacements par packages NPM</a></li>
                    <li><a href="#vite-natif">3. Remplacements par options Vite natives</a></li>
                    <li><a href="#tableau-recap">4. Tableau r√©capitulatif complet</a></li>
                    <li><a href="#recommandations">5. Recommandations finales</a></li>
                    <li><a href="#actions">6. Plan d'action</a></li>
                </ul>
            </div>

            <h2 id="fichiers-obsoletes">üóëÔ∏è 1. Fichiers obsol√®tes identifi√©s</h2>

            <div class="danger-box">
                <h4><span class="emoji">‚ö†Ô∏è</span> Fichier √† supprimer</h4>
                <p><strong>Fichier :</strong> <code>.vite/plugins/sass-glob-import.plugin.js</code></p>
                <p><strong>Raison :</strong> Remplac√© par le package NPM officiel <code>vite-plugin-sass-glob-import</code></p>
                <p><strong>Preuve :</strong></p>
                <ul>
                    <li>‚ùå Aucun import trouv√© dans le code</li>
                    <li>‚úÖ Package NPM d√©j√† utilis√© dans vite.config.js ligne 17</li>
                    <li>‚úÖ Package install√© dans package.json</li>
                </ul>
                <p><strong>Action :</strong></p>
                <pre><code>rm .vite/plugins/sass-glob-import.plugin.js</code></pre>
            </div>

            <h2 id="remplacement-npm">üì¶ 2. Remplacements par packages NPM</h2>

            <h3>üü¢ Niveau 1 : Remplacement SAFE et recommand√©</h3>

            <div class="plugin-card plugin-safe">
                <h4>1. sass-glob-import.plugin.js <span class="status-badge badge-obsolete">OBSOL√àTE</span></h4>
                <p><strong>Fonction :</strong> Support des imports glob SCSS (<code>@import "vendors/*.scss"</code>)</p>
                <p><strong>Package NPM :</strong> <code>vite-plugin-sass-glob-import</code></p>
                <p><strong>Statut :</strong> ‚úÖ D√©j√† remplac√© dans vite.config.js</p>
                <p><strong>Risque :</strong> üü¢ Z√âRO</p>
                <p><strong>Action :</strong> Supprimer le fichier obsol√®te</p>
            </div>

            <div class="plugin-card plugin-safe">
                <h4>2. postcss-url-rewrite.plugin.js <span class="status-badge badge-safe">SAFE</span></h4>
                <p><strong>Fonction :</strong> R√©√©criture des URLs CSS (<code>../../images/</code> ‚Üí <code>../images/</code>)</p>
                <p><strong>Package NPM :</strong> <code>postcss-url</code></p>
                <p><strong>Installation :</strong></p>
                <pre><code>npm install --save-dev postcss-url</code></pre>
                <p><strong>Configuration :</strong></p>
                <pre><code>// vite.config.js
import postcssUrl from 'postcss-url';

css: {
  postcss: {
    plugins: [
      postcssUrl({
        url: (asset, dir) => {
          // Dev : URLs absolues
          if (mode === 'serve') {
            return asset.url.replace(/^\.\.\/\.\.\//g, '/');
          }
          // Build : URLs relatives
          return asset.url.replace(/^\.\.\/\.\.\//g, '../');
        }
      })
    ]
  }
}</code></pre>
                <p><strong>Risque :</strong> üü¢ FAIBLE</p>
                <p><strong>Avantages :</strong></p>
                <ul>
                    <li>‚úÖ Package officiel maintenu</li>
                    <li>‚úÖ Plus de fonctionnalit√©s (inline, copy, etc.)</li>
                    <li>‚úÖ Meilleure performance</li>
                </ul>
            </div>

            <div class="plugin-card plugin-medium">
                <h4>3. copy-static-assets.plugin.js <span class="status-badge badge-medium">MOYEN</span></h4>
                <p><strong>Fonction :</strong> Copie des assets statiques (images, fonts, JSON) utilis√©s</p>
                <p><strong>Package NPM :</strong> <code>vite-plugin-static-copy</code></p>
                <p><strong>Installation :</strong></p>
                <pre><code>npm install --save-dev vite-plugin-static-copy</code></pre>
                <p><strong>Configuration :</strong></p>
                <pre><code>import { viteStaticCopy } from 'vite-plugin-static-copy';

plugins: [
  viteStaticCopy({
    targets: [
      { src: 'images/**/*', dest: 'images' },
      { src: 'fonts/**/*', dest: 'fonts' },
      { src: 'inc/**/*.json', dest: 'inc' }
    ]
  })
]</code></pre>
                <p><strong>Risque :</strong> üü° MOYEN</p>
                <p><strong>‚ö†Ô∏è Attention :</strong></p>
                <ul>
                    <li>‚ùå Le plugin custom scanne CSS/JS et copie UNIQUEMENT les assets utilis√©s</li>
                    <li>‚ùå Le package NPM copie TOUS les assets (build plus lourd)</li>
                </ul>
                <p><strong>Avantages :</strong></p>
                <ul>
                    <li>‚úÖ Simplifie la config</li>
                    <li>‚úÖ Moins de code custom</li>
                    <li>‚úÖ Meilleure maintenance</li>
                </ul>
            </div>

            <h3>üü° Niveau 2 : Remplacement POSSIBLE mais attention</h3>

            <div class="plugin-card plugin-medium">
                <h4>4. php-reload.plugin.js <span class="status-badge badge-medium">MOYEN</span></h4>
                <p><strong>Fonction :</strong> Watch des fichiers PHP + reload navigateur avec debounce</p>
                <p><strong>Package NPM :</strong> <code>vite-plugin-full-reload</code></p>
                <p><strong>Installation :</strong></p>
                <pre><code>npm install --save-dev vite-plugin-full-reload</code></pre>
                <p><strong>Configuration :</strong></p>
                <pre><code>import FullReload from 'vite-plugin-full-reload';

plugins: [
  FullReload(['**/*.php'], {
    delay: 400
  })
]</code></pre>
                <p><strong>Risque :</strong> üü° MOYEN</p>
                <p><strong>Diff√©rence :</strong> Le plugin custom a un debounce intelligent pour grouper les changements multiples. Le package NPM a moins de contr√¥le.</p>
            </div>

            <div class="plugin-card plugin-medium">
                <h4>5. port-killer.plugin.js <span class="status-badge badge-medium">MOYEN</span></h4>
                <p><strong>Fonction :</strong> Tue automatiquement le processus Node.js sur le port Vite</p>
                <p><strong>Package NPM :</strong> <code>kill-port</code></p>
                <p><strong>Installation :</strong></p>
                <pre><code>npm install --save-dev kill-port</code></pre>
                <p><strong>Configuration :</strong></p>
                <pre><code>import kill from 'kill-port';

plugins: [
  {
    name: 'port-killer-wrapper',
    async buildStart() {
      if (this.meta?.watchMode) {
        await kill(5173).catch(() => {});
      }
    }
  }
]</code></pre>
                <p><strong>Risque :</strong> üü° MOYEN</p>
                <p><strong>‚ö†Ô∏è Attention :</strong></p>
                <ul>
                    <li>‚ùå Le plugin custom v√©rifie que c'est un processus Node.js</li>
                    <li>‚ùå Le package NPM tue n'importe quel processus (plus risqu√©)</li>
                </ul>
            </div>

            <h3>üî¥ Niveau 3 : Remplacement RISQU√â / NON RECOMMAND√â</h3>

            <div class="danger-box">
                <h4><span class="emoji">üö´</span> Plugins √† NE PAS remplacer</h4>
                <p>Ces plugins sont essentiels au fonctionnement du bundler WordPress et n'ont aucun √©quivalent NPM :</p>
                <ul>
                    <li><strong>copy-minified-libs.plugin.js</strong> - Logique custom : scan r√©cursif + d√©duplication</li>
                    <li><strong>serve-static-assets.plugin.js</strong> - Middleware custom tr√®s sp√©cifique (CORS, multi-dossiers)</li>
                    <li><strong>accept-all-hmr.plugin.js</strong> - Syst√®me HMR WordPress custom</li>
                    <li><strong>wordpress-assets-detector.plugin.js</strong> - C≈ìur du syst√®me : d√©tection wp_enqueue</li>
                    <li><strong>generate-mu-plugin.js</strong> - G√©n√©ration fichier PHP WordPress</li>
                    <li><strong>cleanup-mu-plugin.js</strong> - Gestion MU-plugin + version</li>
                    <li><strong>multisite-detector.plugin.js</strong> - Connexion DB MySQL WordPress</li>
                    <li><strong>cache-manager.plugin.js</strong> - Syst√®me cache JSON custom</li>
                </ul>
            </div>

            <h2 id="vite-natif">‚ö° 3. Remplacements par options Vite natives</h2>

            <h3>‚úÖ Options Vite natives exploitables</h3>

            <div class="plugin-card plugin-safe">
                <h4>1. serve-static-assets.plugin.js ‚Üí <code>publicDir</code> natif</h4>
                <p><strong>Plugin actuel :</strong> Middleware custom qui sert fonts/, images/, inc/ en mode dev</p>
                <p><strong>Option Vite native :</strong></p>
                <pre><code>export default defineConfig({
  publicDir: resolve(PATHS.themePath, 'sources'),
})</code></pre>
                <p><strong>‚ö†Ô∏è LIMITATION :</strong></p>
                <ul>
                    <li>‚ùå <code>publicDir</code> ne peut pointer que vers UN SEUL dossier</li>
                    <li>‚ùå Le plugin custom sert plusieurs dossiers s√©par√©s</li>
                </ul>
                <p><strong>Verdict :</strong> üü° Remplacement partiel possible SI r√©organisation de la structure</p>
            </div>

            <div class="plugin-card plugin-medium">
                <h4>2. copy-static-assets.plugin.js ‚Üí <code>publicDir</code> + <code>build.copyPublicDir</code></h4>
                <p><strong>Option Vite native :</strong></p>
                <pre><code>export default defineConfig({
  publicDir: 'sources',
  build: {
    copyPublicDir: true // Copie automatiquement publicDir ‚Üí outDir
  }
})</code></pre>
                <p><strong>‚ö†Ô∏è LIMITATION :</strong></p>
                <ul>
                    <li>‚ùå Vite natif copie TOUT le contenu de publicDir</li>
                    <li>‚úÖ Le plugin custom copie UNIQUEMENT les assets r√©f√©renc√©s</li>
                    <li>‚ùå Build plus lourd avec Vite natif</li>
                </ul>
                <p><strong>Verdict :</strong> üü° Possible MAIS build non optimis√©</p>
            </div>

            <div class="plugin-card plugin-safe">
                <h4>3. Plugin inline "ignore-minified-sourcemaps" ‚Üí <code>build.sourcemap</code></h4>
                <p><strong>Plugin actuel :</strong> Supprime les sourcemaps des .min.js (lignes 145-179)</p>
                <p><strong>Option Vite native :</strong></p>
                <pre><code>export default defineConfig({
  build: {
    sourcemap: false // D√©sactive toutes les sourcemaps
  },
  css: {
    devSourcemap: true // Sourcemaps CSS en dev uniquement
  }
})</code></pre>
                <p><strong>Verdict :</strong> üü° Simplifie mais perd la granularit√© (bloque tout, pas juste .min.js)</p>
            </div>

            <div class="warning-box">
                <h4><span class="emoji">‚ö†Ô∏è</span> Plugins NON rempla√ßables par Vite natif</h4>
                <ul>
                    <li><strong>php-reload.plugin.js</strong> - <code>server.watch</code> ne d√©clenche PAS de reload automatique</li>
                    <li><strong>postcss-url-rewrite.plugin.js</strong> - Vite n'a pas d'option native pour r√©√©crire les URLs</li>
                    <li><strong>accept-all-hmr.plugin.js</strong> - Transformation de code (aucune option native)</li>
                    <li><strong>Tous les plugins WordPress</strong> - Logique m√©tier sp√©cifique</li>
                </ul>
            </div>

            <h2 id="tableau-recap">üìä 4. Tableau r√©capitulatif complet</h2>

            <table>
                <thead>
                    <tr>
                        <th>Plugin</th>
                        <th>üü¢ Vite natif</th>
                        <th>üü° Package NPM</th>
                        <th>üî¥ Plugin custom</th>
                        <th>Recommandation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>sass-glob-import</strong></td>
                        <td>‚ùå</td>
                        <td>‚úÖ vite-plugin-sass-glob-import</td>
                        <td>‚ùå Obsol√®te</td>
                        <td>‚úÖ NPM (d√©j√† fait)</td>
                    </tr>
                    <tr>
                        <td><strong>postcss-url-rewrite</strong></td>
                        <td>‚ùå</td>
                        <td>‚úÖ postcss-url</td>
                        <td>‚úÖ Logic custom</td>
                        <td>‚úÖ Remplacer par NPM</td>
                    </tr>
                    <tr>
                        <td><strong>copy-static-assets</strong></td>
                        <td>üü° publicDir (tout copier)</td>
                        <td>‚úÖ vite-plugin-static-copy</td>
                        <td>‚úÖ Scan intelligent</td>
                        <td>‚ö†Ô∏è NPM ou natif selon besoin</td>
                    </tr>
                    <tr>
                        <td><strong>serve-static-assets</strong></td>
                        <td>üü° publicDir (1 dossier)</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Multiple dossiers</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>php-reload</strong></td>
                        <td>‚ùå</td>
                        <td>‚úÖ vite-plugin-full-reload</td>
                        <td>‚úÖ Debounce custom</td>
                        <td>‚ö†Ô∏è NPM acceptable</td>
                    </tr>
                    <tr>
                        <td><strong>port-killer</strong></td>
                        <td>‚ùå</td>
                        <td>‚úÖ kill-port</td>
                        <td>‚úÖ S√©curis√© Node.js</td>
                        <td>‚ö†Ô∏è NPM possible</td>
                    </tr>
                    <tr>
                        <td><strong>load-minified-libs-dev</strong></td>
                        <td>üü° optimizeDeps (partiel)</td>
                        <td>‚ùå</td>
                        <td>‚úÖ G√®re fichiers locaux</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>ignore-minified-sourcemaps</strong></td>
                        <td>üü° build.sourcemap: false</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Granulaire</td>
                        <td>üü° Simplifiable</td>
                    </tr>
                    <tr>
                        <td><strong>copy-minified-libs</strong></td>
                        <td>‚ùå</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Logique custom</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>accept-all-hmr</strong></td>
                        <td>‚ùå</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Core HMR</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>wordpress-assets-detector</strong></td>
                        <td>‚ùå</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Core WordPress</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>generate-mu-plugin</strong></td>
                        <td>‚ùå</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Core WordPress</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                    <tr>
                        <td><strong>cleanup-mu-plugin</strong></td>
                        <td>‚ùå</td>
                        <td>‚ùå</td>
                        <td>‚úÖ Core WordPress</td>
                        <td>‚ùå Garder custom</td>
                    </tr>
                </tbody>
            </table>

            <h2 id="recommandations">üéØ 5. Recommandations finales</h2>

            <h3>üü¢ NIVEAU 1 : Simplifications imm√©diates et safe</h3>
            <div class="success-box">
                <ol>
                    <li><strong>Supprimer sass-glob-import.plugin.js</strong> (d√©j√† remplac√© par NPM) ‚úÖ</li>
                    <li><strong>Remplacer postcss-url-rewrite.plugin.js</strong> par <code>postcss-url</code> (NPM) ‚úÖ</li>
                    <li><strong>Simplifier le plugin inline "ignore-minified-sourcemaps"</strong> par <code>build.sourcemap: false</code></li>
                </ol>
            </div>

            <h3>üü° NIVEAU 2 : Optimisations possibles (trade-offs)</h3>
            <div class="warning-box">
                <ol start="4">
                    <li><strong>Remplacer php-reload.plugin.js</strong> par <code>vite-plugin-full-reload</code> (perte de debounce fin)</li>
                    <li><strong>Remplacer copy-static-assets.plugin.js</strong> par <code>vite-plugin-static-copy</code> (build plus lourd)</li>
                    <li><strong>Option :</strong> Utiliser <code>publicDir</code> natif SI r√©organisation des assets dans un seul dossier</li>
                </ol>
            </div>

            <h3>üî¥ NIVEAU 3 : Ne PAS toucher (core WordPress)</h3>
            <div class="danger-box">
                <p>Tous les plugins WordPress-specific doivent √™tre conserv√©s :</p>
                <ul>
                    <li>generate-mu-plugin.js</li>
                    <li>wordpress-assets-detector.plugin.js</li>
                    <li>multisite-detector.plugin.js</li>
                    <li>cache-manager.plugin.js</li>
                    <li>cleanup-mu-plugin.js</li>
                    <li>serve-static-assets.plugin.js</li>
                    <li>accept-all-hmr.plugin.js</li>
                    <li>copy-minified-libs.plugin.js</li>
                </ul>
            </div>

            <h2 id="actions">‚úÖ 6. Plan d'action</h2>

            <div class="info-box">
                <h4><span class="emoji">üìã</span> Actions prioritaires</h4>

                <h4>Action 1 : Supprimer le fichier obsol√®te</h4>
                <pre><code>rm .vite/plugins/sass-glob-import.plugin.js</code></pre>

                <h4>Action 2 : Remplacer postcss-url-rewrite par package NPM</h4>
                <pre><code># Installation
npm install --save-dev postcss-url

# Modifier vite.config.js
import postcssUrl from 'postcss-url';

// Dans css.postcss.plugins, remplacer :
postcssUrlRewrite(command)

// Par :
postcssUrl({
  url: (asset) => {
    if (command === 'serve') {
      return asset.url.replace(/^\.\.\/\.\.\//g, '/');
    }
    return asset.url.replace(/^\.\.\/\.\.\//g, '../');
  }
})

# Supprimer l'ancien plugin
rm .vite/plugins/postcss-url-rewrite.plugin.js</code></pre>

                <h4>Action 3 : Simplifier ignore-minified-sourcemaps (optionnel)</h4>
                <pre><code>// Dans vite.config.js, supprimer le plugin inline lignes 145-179
// Remplacer par :
build: {
  sourcemap: false
}</code></pre>

                <h4>Actions optionnelles (niveau 2)</h4>
                <pre><code># php-reload ‚Üí vite-plugin-full-reload
npm install --save-dev vite-plugin-full-reload

# copy-static-assets ‚Üí vite-plugin-static-copy
npm install --save-dev vite-plugin-static-copy

# port-killer ‚Üí kill-port
npm install --save-dev kill-port</code></pre>
            </div>

            <div class="success-box">
                <h4><span class="emoji">üéâ</span> Gains attendus</h4>
                <ul>
                    <li>‚úÖ Moins de code custom √† maintenir</li>
                    <li>‚úÖ Config plus standard et document√©e</li>
                    <li>‚úÖ Packages NPM maintenus par la communaut√©</li>
                    <li>‚úÖ Meilleure compatibilit√© future avec Vite</li>
                    <li>‚úÖ R√©duction des bugs potentiels</li>
                </ul>
            </div>

            <div class="warning-box">
                <h4><span class="emoji">‚ö†Ô∏è</span> Points de vigilance</h4>
                <ul>
                    <li>Tester chaque remplacement individuellement</li>
                    <li>V√©rifier le build en dev ET prod apr√®s chaque changement</li>
                    <li>Ne PAS toucher aux plugins WordPress core (wordpress-assets-detector, generate-mu-plugin, etc.)</li>
                    <li>Garder une sauvegarde avant modifications</li>
                </ul>
            </div>
        </div>

        <footer>
            <p><strong>Analyse r√©alis√©e avec Claude Code</strong></p>
            <p>Projet : site-gambetta-2025 | Date : 2 d√©cembre 2025</p>
            <p>Documentation Vite.js : <a href="https://vite.dev" target="_blank">https://vite.dev</a></p>
        </footer>
    </div>
</body>
</html>